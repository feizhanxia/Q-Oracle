# LLM 解读扩展 —— 目标与验收标准

## 开发目标
- 在现有起卦流程基础上，新增“AI 解读”入口：起卦后提供按钮进入解读页面，支持多轮对话、流式输出。
- UI 与现有风格统一，新增部分偏黑客帝国风格（暗色、矩阵感微动画），但保持简洁。
- 大模型配置可外部化：`base_url`、`model` 在公开配置；API Key 走本地 `.env` 或 `st.secrets`。
- 提示词独立存放在单独 txt 文件，便于修改（初始模板包含用户问题、本卦、动爻、之卦）。

## 功能范围
- 起卦主页面保持现状；起卦成功后展示“AI 解读”按钮。
- 解读页面：
  - 显示本卦、动爻位置、之卦信息。
  - 用户输入上下文/追问，模型流式回应。
  - 保留对话历史，支持多轮。
  - UI 与主题统一，加入黑客帝国风格细节（背景/装饰/字体颜色）。
- 配置与密钥：
  - 公共参数：`LLM_BASE_URL`、`LLM_MODEL`（默认 `https://api.siliconflow.cn/v1`，`moonshotai/Kimi-K2-Thinking`）。
  - 密钥：`LLM_API_KEY` 从 `.env` 或 `st.secrets` 读取。
  - 提示词文件：如 `prompts/llm_prompt.txt`，模板中包含占问、本卦、动爻、之卦占位符。

## 验收标准
- UI：主页面无破坏；新增“AI 解读”入口按钮；解读页深色主题、矩阵风细节，移动端可用。
- 功能：能在起卦后点击进入解读；输入问题/追问可流式得到模型回复；对话历史可见。
- 配置：不写死密钥；`.env` 与 `st.secrets` 均可；`LLM_BASE_URL`/`LLM_MODEL` 可覆盖。
- 提示词：存在独立 txt 文件，可编辑；调用时正确插入本卦、动爻、之卦信息。
- 错误处理：模型调用失败时有友好提示，不影响主起卦流程。

代码简洁高效，规范清晰。
注意不要破坏和改变我已经有的页面和功能，只进行需求必要的改动开发。